Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.
Beginning transaction with isolation level 'ReadCommitted'.
Executing DbCommand [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p12='?', @p4='?', @p5='?',
 @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?'], CommandType='Text', CommandTimeout='30']
 
 
INSERT INTO "AlumniProfile" ("Diploma", "Faculty", "UserId", "YearOfGraduation")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";

UPDATE "User" SET "AuthentificatedAt" = @p4, "CreatedTime" = @p5, "Email" = @p6, "FirstName" = @p7, "IsDeleted" = @p8, "IsMiptAlumni" = @p9, "LastName" = @p10, "Role" = @p11
WHERE "Id" = @p12;
Failed executing DbCommand (631ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p12='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?'], CommandType='Text', CommandTimeout='30']

INSERT INTO "AlumniProfile" ("Diploma", "Faculty", "UserId", "YearOfGraduation")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";

UPDATE "User" SET "AuthentificatedAt" = @p4, "CreatedTime" = @p5, "Email" = @p6, "FirstName" = @p7, "IsDeleted" = @p8, "IsMiptAlumni" = @p9, "LastName" = @p10, "Role" = @p11
WHERE "Id" = @p12;

Disposing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.
Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.
An exception occurred in the database while saving changes for context type 'DataAccess.DbSessionProvider'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries.
 See the inner exception for details. ---> Npgsql.PostgresException: 23505: 
 duplicate key value violates unique constraint "IX_AlumniProfile_UserId"
   at Npgsql.NpgsqlConnector.<DoReadMessage>d__148.MoveNext()
--- End of stack trace from previous location where exception was thrown ---An 'IServiceProvider' was created for internal use by Entity Framework.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneOpening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Executed DbCommand (52ms) [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneOpening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "User" (
    "Id" serial NOT NULL,
    "AlumniProfileId" int4 NULL,
    "AuthentificatedAt" timestamptz NULL,
    "CreatedTime" timestamptz NOT NULL,
    "Email" text NULL,
    "FirstName" text NOT NULL,
    "IsDeleted" bool NOT NULL,
    "IsMiptAlumni" bool NOT NULL,
    "LastName" text NOT NULL,
    "Role" int4 NOT NULL,
    "Password_Hash" text NULL,
    CONSTRAINT "PK_User" PRIMARY KEY ("Id")
);Executed DbCommand (60ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "User" (
    "Id" serial NOT NULL,
    "AlumniProfileId" int4 NULL,
    "AuthentificatedAt" timestamptz NULL,
    "CreatedTime" timestamptz NOT NULL,
    "Email" text NULL,
    "FirstName" text NOT NULL,
    "IsDeleted" bool NOT NULL,
    "IsMiptAlumni" bool NOT NULL,
    "LastName" text NOT NULL,
    "Role" int4 NOT NULL,
    "Password_Hash" text NULL,
    CONSTRAINT "PK_User" PRIMARY KEY ("Id")
);Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "AlumniProfile" (
    "Id" serial NOT NULL,
    "Diploma" int4 NOT NULL,
    "Faculty" int4 NOT NULL,
    "UserId" int4 NOT NULL,
    "YearOfGraduation" int4 NOT NULL,
    CONSTRAINT "PK_AlumniProfile" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AlumniProfile_User_UserId" FOREIGN KEY ("UserId") REFERENCES "User" ("Id") ON DELETE CASCADE
);Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "AlumniProfile" (
    "Id" serial NOT NULL,
    "Diploma" int4 NOT NULL,
    "Faculty" int4 NOT NULL,
    "UserId" int4 NOT NULL,
    "YearOfGraduation" int4 NOT NULL,
    CONSTRAINT "PK_AlumniProfile" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AlumniProfile_User_UserId" FOREIGN KEY ("UserId") REFERENCES "User" ("Id") ON DELETE CASCADE
);Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_AlumniProfile_UserId" ON "AlumniProfile" ("UserId");Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_AlumniProfile_UserId" ON "AlumniProfile" ("UserId");Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_Email" ON "User" ("Email");Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_Email" ON "User" ("Email");Committing transaction.Disposing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneOpening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "User" ("AlumniProfileId", "AuthentificatedAt", "CreatedTime", "Email", "FirstName", "IsDeleted", "IsMiptAlumni", "LastName", "Role", "Password_Hash")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "Id";Executed DbCommand (105ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "User" ("AlumniProfileId", "AuthentificatedAt", "CreatedTime", "Email", "FirstName", "IsDeleted", "IsMiptAlumni", "LastName", "Role", "Password_Hash")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "Id";A data reader was disposed.Committing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Disposing transaction.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneCompiling query model: 
'(from User e in DbSet<User>
where Property([e], "Id") == __get_Item_0
select [e]).FirstOrDefault()'Including navigation: '[e].Password'Optimized query model: 
'(from User e in DbSet<User>
join Password e.Password in DbSet<Password>
on Property([e], "Id") equals Property([e.Password], "UserId") into e.Password_group
from Password e.Password in 
    (from Password e.Password_groupItem in [e.Password_group]
    select [e.Password_groupItem]).DefaultIfEmpty()
where Property([e], "Id") == __get_Item_0
select User _Include(
    queryContext: queryContext, 
    entity: [e], 
    included: new object[]{ [e.Password] }, 
    fixup: (QueryContext queryContext | User entity | Object[] included) => 
    {
        Void queryContext.QueryBuffer.StartTracking(
            entity: entity, 
            entityType: EntityType: User)
        return !(bool ReferenceEquals(included[0], null)) ? 
        {
            Void queryContext.QueryBuffer.StartTracking(
                entity: included[0], 
                entityType: EntityType: User.Password#Password)
            return Void SetRelationshipSnapshotValue(
                stateManager: queryContext.StateManager, 
                navigation: User.Password, 
                entity: entity, 
                value: included[0])
        }
         : default(Void)
    }
)).FirstOrDefault()'(QueryContext queryContext) => IAsyncEnumerable<User> _InterceptExceptions(
    source: IAsyncEnumerable<User> _TrackEntities(
        results: IAsyncEnumerable<User> _ToSequence(Task<User> FirstOrDefault(
                source: IAsyncEnumerable<User> _Select(
                    source: IAsyncEnumerable<TransparentIdentifier<User, Password>> _ShapedQuery(
                        queryContext: queryContext, 
                        shaperCommandContext: SelectExpression: 
                            SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
                            FROM "User" AS "e"
                            WHERE "e"."Id" = @__get_Item_0
                            LIMIT 1, 
                        shaper: TypedCompositeShaper<BufferedOffsetEntityShaper<User>, User, BufferedOffsetEntityShaper<Password>, Password, TransparentIdentifier<User, Password>>), 
                    selector: (TransparentIdentifier<User, Password> t1) => User _Include(
                        queryContext: queryContext, 
                        entity: t1.Outer, 
                        included: new object[]{ t1.Inner }, 
                        fixup: (QueryContext queryContext | User entity | Object[] included) => 
                        {
                            Void queryContext.QueryBuffer.StartTracking(
                                entity: entity, 
                                entityType: EntityType: User)
                            return !(bool ReferenceEquals(included[0], null)) ? 
                            {
                                Void queryContext.QueryBuffer.StartTracking(
                                    entity: included[0], 
                                    entityType: EntityType: User.Password#Password)
                                return Void SetRelationshipSnapshotValue(
                                    stateManager: queryContext.StateManager, 
                                    navigation: User.Password, 
                                    entity: entity, 
                                    value: included[0])
                            }
                             : default(Void)
                        }
                    )), 
                cancellationToken: Unhandled parameter: queryContext.CancellationToken)), 
        queryContext: Unhandled parameter: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: DataAccess.DbSessionProvider, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: Unhandled parameter: queryContext)Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[@__get_Item_0='?'], CommandType='Text', CommandTimeout='30']
SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
FROM "User" AS "e"
WHERE "e"."Id" = @__get_Item_0
LIMIT 1Executed DbCommand (43ms) [Parameters=[@__get_Item_0='?'], CommandType='Text', CommandTimeout='30']
SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
FROM "User" AS "e"
WHERE "e"."Id" = @__get_Item_0
LIMIT 1A data reader was disposed.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p13='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AlumniProfile" ("Diploma", "Faculty", "UserId", "YearOfGraduation")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
UPDATE "User" SET "AlumniProfileId" = @p4, "AuthentificatedAt" = @p5, "CreatedTime" = @p6, "Email" = @p7, "FirstName" = @p8, "IsDeleted" = @p9, "IsMiptAlumni" = @p10, "LastName" = @p11, "Role" = @p12
WHERE "Id" = @p13;Executed DbCommand (75ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p13='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AlumniProfile" ("Diploma", "Faculty", "UserId", "YearOfGraduation")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
UPDATE "User" SET "AlumniProfileId" = @p4, "AuthentificatedAt" = @p5, "CreatedTime" = @p6, "Email" = @p7, "FirstName" = @p8, "IsDeleted" = @p9, "IsMiptAlumni" = @p10, "LastName" = @p11, "Role" = @p12
WHERE "Id" = @p13;A data reader was disposed.Committing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Disposing transaction.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneCompiling query model: 
'(from User e in DbSet<User>
where Property([e], "Id") == __get_Item_0
select [e]).FirstOrDefault()'Including navigation: '[e].Password'Optimized query model: 
'(from User e in DbSet<User>
join Password e.Password in DbSet<Password>
on Property([e], "Id") equals Property([e.Password], "UserId") into e.Password_group
from Password e.Password in 
    (from Password e.Password_groupItem in [e.Password_group]
    select [e.Password_groupItem]).DefaultIfEmpty()
where Property([e], "Id") == __get_Item_0
select User _Include(
    queryContext: queryContext, 
    entity: [e], 
    included: new object[]{ [e.Password] }, 
    fixup: (QueryContext queryContext | User entity | Object[] included) => 
    {
        Void queryContext.QueryBuffer.StartTracking(
            entity: entity, 
            entityType: EntityType: User)
        return !(bool ReferenceEquals(included[0], null)) ? 
        {
            Void queryContext.QueryBuffer.StartTracking(
                entity: included[0], 
                entityType: EntityType: User.Password#Password)
            return Void SetRelationshipSnapshotValue(
                stateManager: queryContext.StateManager, 
                navigation: User.Password, 
                entity: entity, 
                value: included[0])
        }
         : default(Void)
    }
)).FirstOrDefault()'(QueryContext queryContext) => IAsyncEnumerable<User> _InterceptExceptions(
    source: IAsyncEnumerable<User> _TrackEntities(
        results: IAsyncEnumerable<User> _ToSequence(Task<User> FirstOrDefault(
                source: IAsyncEnumerable<User> _Select(
                    source: IAsyncEnumerable<TransparentIdentifier<User, Password>> _ShapedQuery(
                        queryContext: queryContext, 
                        shaperCommandContext: SelectExpression: 
                            SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
                            FROM "User" AS "e"
                            WHERE "e"."Id" = @__get_Item_0
                            LIMIT 1, 
                        shaper: TypedCompositeShaper<BufferedOffsetEntityShaper<User>, User, BufferedOffsetEntityShaper<Password>, Password, TransparentIdentifier<User, Password>>), 
                    selector: (TransparentIdentifier<User, Password> t1) => User _Include(
                        queryContext: queryContext, 
                        entity: t1.Outer, 
                        included: new object[]{ t1.Inner }, 
                        fixup: (QueryContext queryContext | User entity | Object[] included) => 
                        {
                            Void queryContext.QueryBuffer.StartTracking(
                                entity: entity, 
                                entityType: EntityType: User)
                            return !(bool ReferenceEquals(included[0], null)) ? 
                            {
                                Void queryContext.QueryBuffer.StartTracking(
                                    entity: included[0], 
                                    entityType: EntityType: User.Password#Password)
                                return Void SetRelationshipSnapshotValue(
                                    stateManager: queryContext.StateManager, 
                                    navigation: User.Password, 
                                    entity: entity, 
                                    value: included[0])
                            }
                             : default(Void)
                        }
                    )), 
                cancellationToken: Unhandled parameter: queryContext.CancellationToken)), 
        queryContext: Unhandled parameter: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: DataAccess.DbSessionProvider, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: Unhandled parameter: queryContext)Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[@__get_Item_0='?'], CommandType='Text', CommandTimeout='30']
SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
FROM "User" AS "e"
WHERE "e"."Id" = @__get_Item_0
LIMIT 1Executed DbCommand (90ms) [Parameters=[@__get_Item_0='?'], CommandType='Text', CommandTimeout='30']
SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
FROM "User" AS "e"
WHERE "e"."Id" = @__get_Item_0
LIMIT 1A data reader was disposed.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p13='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AlumniProfile" ("Diploma", "Faculty", "UserId", "YearOfGraduation")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
UPDATE "User" SET "AlumniProfileId" = @p4, "AuthentificatedAt" = @p5, "CreatedTime" = @p6, "Email" = @p7, "FirstName" = @p8, "IsDeleted" = @p9, "IsMiptAlumni" = @p10, "LastName" = @p11, "Role" = @p12
WHERE "Id" = @p13;Failed executing DbCommand (864ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p13='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AlumniProfile" ("Diploma", "Faculty", "UserId", "YearOfGraduation")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
UPDATE "User" SET "AlumniProfileId" = @p4, "AuthentificatedAt" = @p5, "CreatedTime" = @p6, "Email" = @p7, "FirstName" = @p8, "IsDeleted" = @p9, "IsMiptAlumni" = @p10, "LastName" = @p11, "Role" = @p12
WHERE "Id" = @p13;Disposing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An exception occurred in the database while saving changes for context type 'DataAccess.DbSessionProvider'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> Npgsql.PostgresException: 23505: duplicate key value violates unique constraint "IX_AlumniProfile_UserId"
   at Npgsql.NpgsqlConnector.<DoReadMessage>d__148.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<NextResult>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<<NextResultAsync>b__31_0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<Execute>d__71.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReader>d__92.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<>c__DisplayClass90_0.<<ExecuteDbDataReaderAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.<ExecuteAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.NpgsqlExecutionStrategy.<ExecuteAsync>d__7`2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneOpening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneOpening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "User" (
    "Id" serial NOT NULL,
    "AlumniProfileId" int4 NULL,
    "AuthentificatedAt" timestamptz NULL,
    "CreatedTime" timestamptz NOT NULL,
    "Email" text NULL,
    "FirstName" text NOT NULL,
    "IsDeleted" bool NOT NULL,
    "IsMiptAlumni" bool NOT NULL,
    "LastName" text NOT NULL,
    "Role" int4 NOT NULL,
    "Password_Hash" text NULL,
    CONSTRAINT "PK_User" PRIMARY KEY ("Id")
);Executed DbCommand (61ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "User" (
    "Id" serial NOT NULL,
    "AlumniProfileId" int4 NULL,
    "AuthentificatedAt" timestamptz NULL,
    "CreatedTime" timestamptz NOT NULL,
    "Email" text NULL,
    "FirstName" text NOT NULL,
    "IsDeleted" bool NOT NULL,
    "IsMiptAlumni" bool NOT NULL,
    "LastName" text NOT NULL,
    "Role" int4 NOT NULL,
    "Password_Hash" text NULL,
    CONSTRAINT "PK_User" PRIMARY KEY ("Id")
);Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "AlumniProfile" (
    "Id" serial NOT NULL,
    "Diploma" int4 NOT NULL,
    "Faculty" int4 NOT NULL,
    "UserId" int4 NOT NULL,
    "YearOfGraduation" int4 NOT NULL,
    CONSTRAINT "PK_AlumniProfile" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AlumniProfile_User_UserId" FOREIGN KEY ("UserId") REFERENCES "User" ("Id") ON DELETE CASCADE
);Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "AlumniProfile" (
    "Id" serial NOT NULL,
    "Diploma" int4 NOT NULL,
    "Faculty" int4 NOT NULL,
    "UserId" int4 NOT NULL,
    "YearOfGraduation" int4 NOT NULL,
    CONSTRAINT "PK_AlumniProfile" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AlumniProfile_User_UserId" FOREIGN KEY ("UserId") REFERENCES "User" ("Id") ON DELETE CASCADE
);Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_AlumniProfile_UserId" ON "AlumniProfile" ("UserId");Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_AlumniProfile_UserId" ON "AlumniProfile" ("UserId");Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_Email" ON "User" ("Email");Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_Email" ON "User" ("Email");Committing transaction.Disposing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneOpening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "User" ("AlumniProfileId", "AuthentificatedAt", "CreatedTime", "Email", "FirstName", "IsDeleted", "IsMiptAlumni", "LastName", "Role", "Password_Hash")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "Id";Executed DbCommand (42ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "User" ("AlumniProfileId", "AuthentificatedAt", "CreatedTime", "Email", "FirstName", "IsDeleted", "IsMiptAlumni", "LastName", "Role", "Password_Hash")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "Id";A data reader was disposed.Committing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Disposing transaction.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneCompiling query model: 
'(from User e in DbSet<User>
where Property([e], "Id") == __get_Item_0
select [e]).FirstOrDefault()'Including navigation: '[e].Password'Optimized query model: 
'(from User e in DbSet<User>
join Password e.Password in DbSet<Password>
on Property([e], "Id") equals Property([e.Password], "UserId") into e.Password_group
from Password e.Password in 
    (from Password e.Password_groupItem in [e.Password_group]
    select [e.Password_groupItem]).DefaultIfEmpty()
where Property([e], "Id") == __get_Item_0
select User _Include(
    queryContext: queryContext, 
    entity: [e], 
    included: new object[]{ [e.Password] }, 
    fixup: (QueryContext queryContext | User entity | Object[] included) => 
    {
        Void queryContext.QueryBuffer.StartTracking(
            entity: entity, 
            entityType: EntityType: User)
        return !(bool ReferenceEquals(included[0], null)) ? 
        {
            Void queryContext.QueryBuffer.StartTracking(
                entity: included[0], 
                entityType: EntityType: User.Password#Password)
            return Void SetRelationshipSnapshotValue(
                stateManager: queryContext.StateManager, 
                navigation: User.Password, 
                entity: entity, 
                value: included[0])
        }
         : default(Void)
    }
)).FirstOrDefault()'(QueryContext queryContext) => IAsyncEnumerable<User> _InterceptExceptions(
    source: IAsyncEnumerable<User> _TrackEntities(
        results: IAsyncEnumerable<User> _ToSequence(Task<User> FirstOrDefault(
                source: IAsyncEnumerable<User> _Select(
                    source: IAsyncEnumerable<TransparentIdentifier<User, Password>> _ShapedQuery(
                        queryContext: queryContext, 
                        shaperCommandContext: SelectExpression: 
                            SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
                            FROM "User" AS "e"
                            WHERE "e"."Id" = @__get_Item_0
                            LIMIT 1, 
                        shaper: TypedCompositeShaper<BufferedOffsetEntityShaper<User>, User, BufferedOffsetEntityShaper<Password>, Password, TransparentIdentifier<User, Password>>), 
                    selector: (TransparentIdentifier<User, Password> t1) => User _Include(
                        queryContext: queryContext, 
                        entity: t1.Outer, 
                        included: new object[]{ t1.Inner }, 
                        fixup: (QueryContext queryContext | User entity | Object[] included) => 
                        {
                            Void queryContext.QueryBuffer.StartTracking(
                                entity: entity, 
                                entityType: EntityType: User)
                            return !(bool ReferenceEquals(included[0], null)) ? 
                            {
                                Void queryContext.QueryBuffer.StartTracking(
                                    entity: included[0], 
                                    entityType: EntityType: User.Password#Password)
                                return Void SetRelationshipSnapshotValue(
                                    stateManager: queryContext.StateManager, 
                                    navigation: User.Password, 
                                    entity: entity, 
                                    value: included[0])
                            }
                             : default(Void)
                        }
                    )), 
                cancellationToken: Unhandled parameter: queryContext.CancellationToken)), 
        queryContext: Unhandled parameter: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: DataAccess.DbSessionProvider, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: Unhandled parameter: queryContext)Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[@__get_Item_0='?'], CommandType='Text', CommandTimeout='30']
SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
FROM "User" AS "e"
WHERE "e"."Id" = @__get_Item_0
LIMIT 1Executed DbCommand (46ms) [Parameters=[@__get_Item_0='?'], CommandType='Text', CommandTimeout='30']
SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
FROM "User" AS "e"
WHERE "e"."Id" = @__get_Item_0
LIMIT 1A data reader was disposed.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p13='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AlumniProfile" ("Diploma", "Faculty", "UserId", "YearOfGraduation")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
UPDATE "User" SET "AlumniProfileId" = @p4, "AuthentificatedAt" = @p5, "CreatedTime" = @p6, "Email" = @p7, "FirstName" = @p8, "IsDeleted" = @p9, "IsMiptAlumni" = @p10, "LastName" = @p11, "Role" = @p12
WHERE "Id" = @p13;Executed DbCommand (95ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p13='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AlumniProfile" ("Diploma", "Faculty", "UserId", "YearOfGraduation")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
UPDATE "User" SET "AlumniProfileId" = @p4, "AuthentificatedAt" = @p5, "CreatedTime" = @p6, "Email" = @p7, "FirstName" = @p8, "IsDeleted" = @p9, "IsMiptAlumni" = @p10, "LastName" = @p11, "Role" = @p12
WHERE "Id" = @p13;A data reader was disposed.Committing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Disposing transaction.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneOpening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "User" (
    "Id" serial NOT NULL,
    "AlumniProfileId" int4 NULL,
    "AuthentificatedAt" timestamptz NULL,
    "CreatedTime" timestamptz NOT NULL,
    "Email" text NULL,
    "FirstName" text NOT NULL,
    "IsDeleted" bool NOT NULL,
    "IsMiptAlumni" bool NOT NULL,
    "LastName" text NOT NULL,
    "Role" int4 NOT NULL,
    "Password_Hash" text NULL,
    CONSTRAINT "PK_User" PRIMARY KEY ("Id")
);Executed DbCommand (55ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "User" (
    "Id" serial NOT NULL,
    "AlumniProfileId" int4 NULL,
    "AuthentificatedAt" timestamptz NULL,
    "CreatedTime" timestamptz NOT NULL,
    "Email" text NULL,
    "FirstName" text NOT NULL,
    "IsDeleted" bool NOT NULL,
    "IsMiptAlumni" bool NOT NULL,
    "LastName" text NOT NULL,
    "Role" int4 NOT NULL,
    "Password_Hash" text NULL,
    CONSTRAINT "PK_User" PRIMARY KEY ("Id")
);Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "AlumniProfile" (
    "Id" serial NOT NULL,
    "Diploma" int4 NOT NULL,
    "Faculty" int4 NOT NULL,
    "UserId" int4 NOT NULL,
    "YearOfGraduation" int4 NOT NULL,
    CONSTRAINT "PK_AlumniProfile" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AlumniProfile_User_UserId" FOREIGN KEY ("UserId") REFERENCES "User" ("Id") ON DELETE CASCADE
);Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "AlumniProfile" (
    "Id" serial NOT NULL,
    "Diploma" int4 NOT NULL,
    "Faculty" int4 NOT NULL,
    "UserId" int4 NOT NULL,
    "YearOfGraduation" int4 NOT NULL,
    CONSTRAINT "PK_AlumniProfile" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AlumniProfile_User_UserId" FOREIGN KEY ("UserId") REFERENCES "User" ("Id") ON DELETE CASCADE
);Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_AlumniProfile_UserId" ON "AlumniProfile" ("UserId");Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_AlumniProfile_UserId" ON "AlumniProfile" ("UserId");Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_AlumniProfileId" ON "User" ("AlumniProfileId");Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_AlumniProfileId" ON "User" ("AlumniProfileId");Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_Email" ON "User" ("Email");Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_Email" ON "User" ("Email");Committing transaction.Disposing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneOpening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "User" ("AlumniProfileId", "AuthentificatedAt", "CreatedTime", "Email", "FirstName", "IsDeleted", "IsMiptAlumni", "LastName", "Role", "Password_Hash")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "Id";Executed DbCommand (83ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "User" ("AlumniProfileId", "AuthentificatedAt", "CreatedTime", "Email", "FirstName", "IsDeleted", "IsMiptAlumni", "LastName", "Role", "Password_Hash")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "Id";A data reader was disposed.Committing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Disposing transaction.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneCompiling query model: 
'(from User e in DbSet<User>
where Property([e], "Id") == __get_Item_0
select [e]).FirstOrDefault()'Including navigation: '[e].Password'Optimized query model: 
'(from User e in DbSet<User>
join Password e.Password in DbSet<Password>
on Property([e], "Id") equals Property([e.Password], "UserId") into e.Password_group
from Password e.Password in 
    (from Password e.Password_groupItem in [e.Password_group]
    select [e.Password_groupItem]).DefaultIfEmpty()
where Property([e], "Id") == __get_Item_0
select User _Include(
    queryContext: queryContext, 
    entity: [e], 
    included: new object[]{ [e.Password] }, 
    fixup: (QueryContext queryContext | User entity | Object[] included) => 
    {
        Void queryContext.QueryBuffer.StartTracking(
            entity: entity, 
            entityType: EntityType: User)
        return !(bool ReferenceEquals(included[0], null)) ? 
        {
            Void queryContext.QueryBuffer.StartTracking(
                entity: included[0], 
                entityType: EntityType: User.Password#Password)
            return Void SetRelationshipSnapshotValue(
                stateManager: queryContext.StateManager, 
                navigation: User.Password, 
                entity: entity, 
                value: included[0])
        }
         : default(Void)
    }
)).FirstOrDefault()'(QueryContext queryContext) => IAsyncEnumerable<User> _InterceptExceptions(
    source: IAsyncEnumerable<User> _TrackEntities(
        results: IAsyncEnumerable<User> _ToSequence(Task<User> FirstOrDefault(
                source: IAsyncEnumerable<User> _Select(
                    source: IAsyncEnumerable<TransparentIdentifier<User, Password>> _ShapedQuery(
                        queryContext: queryContext, 
                        shaperCommandContext: SelectExpression: 
                            SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
                            FROM "User" AS "e"
                            WHERE "e"."Id" = @__get_Item_0
                            LIMIT 1, 
                        shaper: TypedCompositeShaper<BufferedOffsetEntityShaper<User>, User, BufferedOffsetEntityShaper<Password>, Password, TransparentIdentifier<User, Password>>), 
                    selector: (TransparentIdentifier<User, Password> t1) => User _Include(
                        queryContext: queryContext, 
                        entity: t1.Outer, 
                        included: new object[]{ t1.Inner }, 
                        fixup: (QueryContext queryContext | User entity | Object[] included) => 
                        {
                            Void queryContext.QueryBuffer.StartTracking(
                                entity: entity, 
                                entityType: EntityType: User)
                            return !(bool ReferenceEquals(included[0], null)) ? 
                            {
                                Void queryContext.QueryBuffer.StartTracking(
                                    entity: included[0], 
                                    entityType: EntityType: User.Password#Password)
                                return Void SetRelationshipSnapshotValue(
                                    stateManager: queryContext.StateManager, 
                                    navigation: User.Password, 
                                    entity: entity, 
                                    value: included[0])
                            }
                             : default(Void)
                        }
                    )), 
                cancellationToken: Unhandled parameter: queryContext.CancellationToken)), 
        queryContext: Unhandled parameter: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: DataAccess.DbSessionProvider, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: Unhandled parameter: queryContext)Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[@__get_Item_0='?'], CommandType='Text', CommandTimeout='30']
SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
FROM "User" AS "e"
WHERE "e"."Id" = @__get_Item_0
LIMIT 1Executed DbCommand (73ms) [Parameters=[@__get_Item_0='?'], CommandType='Text', CommandTimeout='30']
SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
FROM "User" AS "e"
WHERE "e"."Id" = @__get_Item_0
LIMIT 1A data reader was disposed.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p13='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AlumniProfile" ("Diploma", "Faculty", "UserId", "YearOfGraduation")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
UPDATE "User" SET "AlumniProfileId" = @p4, "AuthentificatedAt" = @p5, "CreatedTime" = @p6, "Email" = @p7, "FirstName" = @p8, "IsDeleted" = @p9, "IsMiptAlumni" = @p10, "LastName" = @p11, "Role" = @p12
WHERE "Id" = @p13;Executed DbCommand (46ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p13='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AlumniProfile" ("Diploma", "Faculty", "UserId", "YearOfGraduation")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
UPDATE "User" SET "AlumniProfileId" = @p4, "AuthentificatedAt" = @p5, "CreatedTime" = @p6, "Email" = @p7, "FirstName" = @p8, "IsDeleted" = @p9, "IsMiptAlumni" = @p10, "LastName" = @p11, "Role" = @p12
WHERE "Id" = @p13;A data reader was disposed.Committing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Disposing transaction.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneCompiling query model: 
'(from User e in DbSet<User>
where Property([e], "Id") == __get_Item_0
select [e]).FirstOrDefault()'Including navigation: '[e].Password'Optimized query model: 
'(from User e in DbSet<User>
join Password e.Password in DbSet<Password>
on Property([e], "Id") equals Property([e.Password], "UserId") into e.Password_group
from Password e.Password in 
    (from Password e.Password_groupItem in [e.Password_group]
    select [e.Password_groupItem]).DefaultIfEmpty()
where Property([e], "Id") == __get_Item_0
select User _Include(
    queryContext: queryContext, 
    entity: [e], 
    included: new object[]{ [e.Password] }, 
    fixup: (QueryContext queryContext | User entity | Object[] included) => 
    {
        Void queryContext.QueryBuffer.StartTracking(
            entity: entity, 
            entityType: EntityType: User)
        return !(bool ReferenceEquals(included[0], null)) ? 
        {
            Void queryContext.QueryBuffer.StartTracking(
                entity: included[0], 
                entityType: EntityType: User.Password#Password)
            return Void SetRelationshipSnapshotValue(
                stateManager: queryContext.StateManager, 
                navigation: User.Password, 
                entity: entity, 
                value: included[0])
        }
         : default(Void)
    }
)).FirstOrDefault()'(QueryContext queryContext) => IAsyncEnumerable<User> _InterceptExceptions(
    source: IAsyncEnumerable<User> _TrackEntities(
        results: IAsyncEnumerable<User> _ToSequence(Task<User> FirstOrDefault(
                source: IAsyncEnumerable<User> _Select(
                    source: IAsyncEnumerable<TransparentIdentifier<User, Password>> _ShapedQuery(
                        queryContext: queryContext, 
                        shaperCommandContext: SelectExpression: 
                            SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
                            FROM "User" AS "e"
                            WHERE "e"."Id" = @__get_Item_0
                            LIMIT 1, 
                        shaper: TypedCompositeShaper<BufferedOffsetEntityShaper<User>, User, BufferedOffsetEntityShaper<Password>, Password, TransparentIdentifier<User, Password>>), 
                    selector: (TransparentIdentifier<User, Password> t1) => User _Include(
                        queryContext: queryContext, 
                        entity: t1.Outer, 
                        included: new object[]{ t1.Inner }, 
                        fixup: (QueryContext queryContext | User entity | Object[] included) => 
                        {
                            Void queryContext.QueryBuffer.StartTracking(
                                entity: entity, 
                                entityType: EntityType: User)
                            return !(bool ReferenceEquals(included[0], null)) ? 
                            {
                                Void queryContext.QueryBuffer.StartTracking(
                                    entity: included[0], 
                                    entityType: EntityType: User.Password#Password)
                                return Void SetRelationshipSnapshotValue(
                                    stateManager: queryContext.StateManager, 
                                    navigation: User.Password, 
                                    entity: entity, 
                                    value: included[0])
                            }
                             : default(Void)
                        }
                    )), 
                cancellationToken: Unhandled parameter: queryContext.CancellationToken)), 
        queryContext: Unhandled parameter: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: DataAccess.DbSessionProvider, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: Unhandled parameter: queryContext)Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[@__get_Item_0='?'], CommandType='Text', CommandTimeout='30']
SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
FROM "User" AS "e"
WHERE "e"."Id" = @__get_Item_0
LIMIT 1Executed DbCommand (42ms) [Parameters=[@__get_Item_0='?'], CommandType='Text', CommandTimeout='30']
SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
FROM "User" AS "e"
WHERE "e"."Id" = @__get_Item_0
LIMIT 1A data reader was disposed.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p13='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AlumniProfile" ("Diploma", "Faculty", "UserId", "YearOfGraduation")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
UPDATE "User" SET "AlumniProfileId" = @p4, "AuthentificatedAt" = @p5, "CreatedTime" = @p6, "Email" = @p7, "FirstName" = @p8, "IsDeleted" = @p9, "IsMiptAlumni" = @p10, "LastName" = @p11, "Role" = @p12
WHERE "Id" = @p13;Failed executing DbCommand (475ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p13='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AlumniProfile" ("Diploma", "Faculty", "UserId", "YearOfGraduation")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
UPDATE "User" SET "AlumniProfileId" = @p4, "AuthentificatedAt" = @p5, "CreatedTime" = @p6, "Email" = @p7, "FirstName" = @p8, "IsDeleted" = @p9, "IsMiptAlumni" = @p10, "LastName" = @p11, "Role" = @p12
WHERE "Id" = @p13;Disposing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An exception occurred in the database while saving changes for context type 'DataAccess.DbSessionProvider'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> Npgsql.PostgresException: 23505: duplicate key value violates unique constraint "IX_AlumniProfile_UserId"
   at Npgsql.NpgsqlConnector.<DoReadMessage>d__148.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<NextResult>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<<NextResultAsync>b__31_0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<Execute>d__71.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReader>d__92.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<>c__DisplayClass90_0.<<ExecuteDbDataReaderAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.<ExecuteAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.NpgsqlExecutionStrategy.<ExecuteAsync>d__7`2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneOpening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "User" (
    "Id" serial NOT NULL,
    "AlumniProfileId" int4 NULL,
    "AuthentificatedAt" timestamptz NULL,
    "CreatedTime" timestamptz NOT NULL,
    "Email" text NULL,
    "FirstName" text NOT NULL,
    "IsDeleted" bool NOT NULL,
    "IsMiptAlumni" bool NOT NULL,
    "LastName" text NOT NULL,
    "Role" int4 NOT NULL,
    "Password_Hash" text NULL,
    "AlumniProfile_Diploma" int4 NOT NULL,
    "AlumniProfile_Faculty" int4 NOT NULL,
    "AlumniProfile_Id" int4 NOT NULL,
    "AlumniProfile_YearOfGraduation" int4 NOT NULL,
    CONSTRAINT "PK_User" PRIMARY KEY ("Id")
);Executed DbCommand (57ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "User" (
    "Id" serial NOT NULL,
    "AlumniProfileId" int4 NULL,
    "AuthentificatedAt" timestamptz NULL,
    "CreatedTime" timestamptz NOT NULL,
    "Email" text NULL,
    "FirstName" text NOT NULL,
    "IsDeleted" bool NOT NULL,
    "IsMiptAlumni" bool NOT NULL,
    "LastName" text NOT NULL,
    "Role" int4 NOT NULL,
    "Password_Hash" text NULL,
    "AlumniProfile_Diploma" int4 NOT NULL,
    "AlumniProfile_Faculty" int4 NOT NULL,
    "AlumniProfile_Id" int4 NOT NULL,
    "AlumniProfile_YearOfGraduation" int4 NOT NULL,
    CONSTRAINT "PK_User" PRIMARY KEY ("Id")
);Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_AlumniProfileId" ON "User" ("AlumniProfileId");Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_AlumniProfileId" ON "User" ("AlumniProfileId");Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_Email" ON "User" ("Email");Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_Email" ON "User" ("Email");Committing transaction.Disposing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneOpening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "User" ("AlumniProfileId", "AuthentificatedAt", "CreatedTime", "Email", "FirstName", "IsDeleted", "IsMiptAlumni", "LastName", "Role", "Password_Hash")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "Id";Failed executing DbCommand (557ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "User" ("AlumniProfileId", "AuthentificatedAt", "CreatedTime", "Email", "FirstName", "IsDeleted", "IsMiptAlumni", "LastName", "Role", "Password_Hash")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "Id";Disposing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An exception occurred in the database while saving changes for context type 'DataAccess.DbSessionProvider'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> Npgsql.PostgresException: 23502: null value in column "AlumniProfile_Diploma" violates not-null constraint
   at Npgsql.NpgsqlConnector.<DoReadMessage>d__148.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<NextResult>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<<NextResultAsync>b__31_0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<Execute>d__71.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReader>d__92.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<>c__DisplayClass90_0.<<ExecuteDbDataReaderAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.<ExecuteAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.NpgsqlExecutionStrategy.<ExecuteAsync>d__7`2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneOpening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Executed DbCommand (58ms) [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "User" (
    "Id" serial NOT NULL,
    "AlumniProfileFk" int4 NULL,
    "AuthentificatedAt" timestamptz NULL,
    "CreatedTime" timestamptz NOT NULL,
    "Email" text NULL,
    "FirstName" text NOT NULL,
    "IsDeleted" bool NOT NULL,
    "IsMiptAlumni" bool NOT NULL,
    "LastName" text NOT NULL,
    "Role" int4 NOT NULL,
    "Password_Hash" text NULL,
    CONSTRAINT "PK_User" PRIMARY KEY ("Id")
);Executed DbCommand (70ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "User" (
    "Id" serial NOT NULL,
    "AlumniProfileFk" int4 NULL,
    "AuthentificatedAt" timestamptz NULL,
    "CreatedTime" timestamptz NOT NULL,
    "Email" text NULL,
    "FirstName" text NOT NULL,
    "IsDeleted" bool NOT NULL,
    "IsMiptAlumni" bool NOT NULL,
    "LastName" text NOT NULL,
    "Role" int4 NOT NULL,
    "Password_Hash" text NULL,
    CONSTRAINT "PK_User" PRIMARY KEY ("Id")
);Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "AlumniProfile" (
    "Id" serial NOT NULL,
    "Diploma" int4 NOT NULL,
    "Faculty" int4 NOT NULL,
    "UserFk" int4 NOT NULL,
    "YearOfGraduation" int4 NOT NULL,
    CONSTRAINT "PK_AlumniProfile" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AlumniProfile_User_UserFk" FOREIGN KEY ("UserFk") REFERENCES "User" ("Id") ON DELETE CASCADE
);Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "AlumniProfile" (
    "Id" serial NOT NULL,
    "Diploma" int4 NOT NULL,
    "Faculty" int4 NOT NULL,
    "UserFk" int4 NOT NULL,
    "YearOfGraduation" int4 NOT NULL,
    CONSTRAINT "PK_AlumniProfile" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AlumniProfile_User_UserFk" FOREIGN KEY ("UserFk") REFERENCES "User" ("Id") ON DELETE CASCADE
);Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX "IX_AlumniProfile_UserFk" ON "AlumniProfile" ("UserFk");Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX "IX_AlumniProfile_UserFk" ON "AlumniProfile" ("UserFk");Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_AlumniProfileFk" ON "User" ("AlumniProfileFk");Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_AlumniProfileFk" ON "User" ("AlumniProfileFk");Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_Email" ON "User" ("Email");Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_Email" ON "User" ("Email");Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE "User" ADD CONSTRAINT "FK_User_AlumniProfile_AlumniProfileFk" FOREIGN KEY ("AlumniProfileFk") REFERENCES "AlumniProfile" ("Id") ON DELETE NO ACTION;Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE "User" ADD CONSTRAINT "FK_User_AlumniProfile_AlumniProfileFk" FOREIGN KEY ("AlumniProfileFk") REFERENCES "AlumniProfile" ("Id") ON DELETE NO ACTION;Committing transaction.Disposing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneCompiling query model: 
'from User object in DbSet<User>
where !([object].IsDeleted)
select [object]'Including navigation: '[object].Password'Optimized query model: 
'from User object in DbSet<User>
join Password object.Password in DbSet<Password>
on Property([object], "Id") equals Property([object.Password], "UserId") into object.Password_group
from Password object.Password in 
    (from Password object.Password_groupItem in [object.Password_group]
    select [object.Password_groupItem]).DefaultIfEmpty()
where !([object].IsDeleted)
select User _Include(
    queryContext: queryContext, 
    entity: [object], 
    included: new object[]{ [object.Password] }, 
    fixup: (QueryContext queryContext | User entity | Object[] included) => 
    {
        Void queryContext.QueryBuffer.StartTracking(
            entity: entity, 
            entityType: EntityType: User)
        return !(bool ReferenceEquals(included[0], null)) ? 
        {
            Void queryContext.QueryBuffer.StartTracking(
                entity: included[0], 
                entityType: EntityType: User.Password#Password)
            return Void SetRelationshipSnapshotValue(
                stateManager: queryContext.StateManager, 
                navigation: User.Password, 
                entity: entity, 
                value: included[0])
        }
         : default(Void)
    }
)'(QueryContext queryContext) => IAsyncEnumerable<User> _InterceptExceptions(
    source: IAsyncEnumerable<User> _TrackEntities(
        results: IAsyncEnumerable<User> _Select(
            source: IAsyncEnumerable<TransparentIdentifier<User, Password>> _ShapedQuery(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT "object"."Id", "object"."AlumniProfileFk", "object"."AuthentificatedAt", "object"."CreatedTime", "object"."Email", "object"."FirstName", "object"."IsDeleted", "object"."IsMiptAlumni", "object"."LastName", "object"."Role", "object"."Id", "object"."Password_Hash"
                    FROM "User" AS "object"
                    WHERE "object"."IsDeleted" = FALSE, 
                shaper: TypedCompositeShaper<BufferedOffsetEntityShaper<User>, User, BufferedOffsetEntityShaper<Password>, Password, TransparentIdentifier<User, Password>>), 
            selector: (TransparentIdentifier<User, Password> t1) => User _Include(
                queryContext: queryContext, 
                entity: t1.Outer, 
                included: new object[]{ t1.Inner }, 
                fixup: (QueryContext queryContext | User entity | Object[] included) => 
                {
                    Void queryContext.QueryBuffer.StartTracking(
                        entity: entity, 
                        entityType: EntityType: User)
                    return !(bool ReferenceEquals(included[0], null)) ? 
                    {
                        Void queryContext.QueryBuffer.StartTracking(
                            entity: included[0], 
                            entityType: EntityType: User.Password#Password)
                        return Void SetRelationshipSnapshotValue(
                            stateManager: queryContext.StateManager, 
                            navigation: User.Password, 
                            entity: entity, 
                            value: included[0])
                    }
                     : default(Void)
                }
            )), 
        queryContext: Unhandled parameter: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: DataAccess.DbSessionProvider, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: Unhandled parameter: queryContext)Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "object"."Id", "object"."AlumniProfileFk", "object"."AuthentificatedAt", "object"."CreatedTime", "object"."Email", "object"."FirstName", "object"."IsDeleted", "object"."IsMiptAlumni", "object"."LastName", "object"."Role", "object"."Id", "object"."Password_Hash"
FROM "User" AS "object"
WHERE "object"."IsDeleted" = FALSEExecuted DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "object"."Id", "object"."AlumniProfileFk", "object"."AuthentificatedAt", "object"."CreatedTime", "object"."Email", "object"."FirstName", "object"."IsDeleted", "object"."IsMiptAlumni", "object"."LastName", "object"."Role", "object"."Id", "object"."Password_Hash"
FROM "User" AS "object"
WHERE "object"."IsDeleted" = FALSEA data reader was disposed.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneOpening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "User" ("AlumniProfileFk", "AuthentificatedAt", "CreatedTime", "Email", "FirstName", "IsDeleted", "IsMiptAlumni", "LastName", "Role", "Password_Hash")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "Id";Executed DbCommand (66ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "User" ("AlumniProfileFk", "AuthentificatedAt", "CreatedTime", "Email", "FirstName", "IsDeleted", "IsMiptAlumni", "LastName", "Role", "Password_Hash")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "Id";A data reader was disposed.Committing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Disposing transaction.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneCompiling query model: 
'(from User e in DbSet<User>
where Property([e], "Id") == __get_Item_0
select [e]).FirstOrDefault()'Including navigation: '[e].Password'Optimized query model: 
'(from User e in DbSet<User>
join Password e.Password in DbSet<Password>
on Property([e], "Id") equals Property([e.Password], "UserId") into e.Password_group
from Password e.Password in 
    (from Password e.Password_groupItem in [e.Password_group]
    select [e.Password_groupItem]).DefaultIfEmpty()
where Property([e], "Id") == __get_Item_0
select User _Include(
    queryContext: queryContext, 
    entity: [e], 
    included: new object[]{ [e.Password] }, 
    fixup: (QueryContext queryContext | User entity | Object[] included) => 
    {
        Void queryContext.QueryBuffer.StartTracking(
            entity: entity, 
            entityType: EntityType: User)
        return !(bool ReferenceEquals(included[0], null)) ? 
        {
            Void queryContext.QueryBuffer.StartTracking(
                entity: included[0], 
                entityType: EntityType: User.Password#Password)
            return Void SetRelationshipSnapshotValue(
                stateManager: queryContext.StateManager, 
                navigation: User.Password, 
                entity: entity, 
                value: included[0])
        }
         : default(Void)
    }
)).FirstOrDefault()'(QueryContext queryContext) => IAsyncEnumerable<User> _InterceptExceptions(
    source: IAsyncEnumerable<User> _TrackEntities(
        results: IAsyncEnumerable<User> _ToSequence(Task<User> FirstOrDefault(
                source: IAsyncEnumerable<User> _Select(
                    source: IAsyncEnumerable<TransparentIdentifier<User, Password>> _ShapedQuery(
                        queryContext: queryContext, 
                        shaperCommandContext: SelectExpression: 
                            SELECT "e"."Id", "e"."AlumniProfileFk", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
                            FROM "User" AS "e"
                            WHERE "e"."Id" = @__get_Item_0
                            LIMIT 1, 
                        shaper: TypedCompositeShaper<BufferedOffsetEntityShaper<User>, User, BufferedOffsetEntityShaper<Password>, Password, TransparentIdentifier<User, Password>>), 
                    selector: (TransparentIdentifier<User, Password> t1) => User _Include(
                        queryContext: queryContext, 
                        entity: t1.Outer, 
                        included: new object[]{ t1.Inner }, 
                        fixup: (QueryContext queryContext | User entity | Object[] included) => 
                        {
                            Void queryContext.QueryBuffer.StartTracking(
                                entity: entity, 
                                entityType: EntityType: User)
                            return !(bool ReferenceEquals(included[0], null)) ? 
                            {
                                Void queryContext.QueryBuffer.StartTracking(
                                    entity: included[0], 
                                    entityType: EntityType: User.Password#Password)
                                return Void SetRelationshipSnapshotValue(
                                    stateManager: queryContext.StateManager, 
                                    navigation: User.Password, 
                                    entity: entity, 
                                    value: included[0])
                            }
                             : default(Void)
                        }
                    )), 
                cancellationToken: Unhandled parameter: queryContext.CancellationToken)), 
        queryContext: Unhandled parameter: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: DataAccess.DbSessionProvider, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: Unhandled parameter: queryContext)Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[@__get_Item_0='?'], CommandType='Text', CommandTimeout='30']
SELECT "e"."Id", "e"."AlumniProfileFk", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
FROM "User" AS "e"
WHERE "e"."Id" = @__get_Item_0
LIMIT 1Executed DbCommand (113ms) [Parameters=[@__get_Item_0='?'], CommandType='Text', CommandTimeout='30']
SELECT "e"."Id", "e"."AlumniProfileFk", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
FROM "User" AS "e"
WHERE "e"."Id" = @__get_Item_0
LIMIT 1A data reader was disposed.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AlumniProfile" ("Diploma", "Faculty", "UserFk", "YearOfGraduation")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";Failed executing DbCommand (891ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AlumniProfile" ("Diploma", "Faculty", "UserFk", "YearOfGraduation")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";Disposing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An exception occurred in the database while saving changes for context type 'DataAccess.DbSessionProvider'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> Npgsql.PostgresException: 23503: insert or update on table "AlumniProfile" violates foreign key constraint "FK_AlumniProfile_User_UserFk"
   at Npgsql.NpgsqlConnector.<DoReadMessage>d__148.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<NextResult>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<<NextResultAsync>b__31_0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<Execute>d__71.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReader>d__92.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<>c__DisplayClass90_0.<<ExecuteDbDataReaderAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.<ExecuteAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.NpgsqlExecutionStrategy.<ExecuteAsync>d__7`2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneOpening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Executed DbCommand (66ms) [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneCompiling query model: 
'(from User e in DbSet<User>
where Property([e], "Id") == __get_Item_0
select [e]).FirstOrDefault()'Including navigation: '[e].Password'Optimized query model: 
'(from User e in DbSet<User>
join Password e.Password in DbSet<Password>
on Property([e], "Id") equals Property([e.Password], "UserId") into e.Password_group
from Password e.Password in 
    (from Password e.Password_groupItem in [e.Password_group]
    select [e.Password_groupItem]).DefaultIfEmpty()
where Property([e], "Id") == __get_Item_0
select User _Include(
    queryContext: queryContext, 
    entity: [e], 
    included: new object[]{ [e.Password] }, 
    fixup: (QueryContext queryContext | User entity | Object[] included) => 
    {
        Void queryContext.QueryBuffer.StartTracking(
            entity: entity, 
            entityType: EntityType: User)
        return !(bool ReferenceEquals(included[0], null)) ? 
        {
            Void queryContext.QueryBuffer.StartTracking(
                entity: included[0], 
                entityType: EntityType: User.Password#Password)
            return Void SetRelationshipSnapshotValue(
                stateManager: queryContext.StateManager, 
                navigation: User.Password, 
                entity: entity, 
                value: included[0])
        }
         : default(Void)
    }
)).FirstOrDefault()'(QueryContext queryContext) => IAsyncEnumerable<User> _InterceptExceptions(
    source: IAsyncEnumerable<User> _TrackEntities(
        results: IAsyncEnumerable<User> _ToSequence(Task<User> FirstOrDefault(
                source: IAsyncEnumerable<User> _Select(
                    source: IAsyncEnumerable<TransparentIdentifier<User, Password>> _ShapedQuery(
                        queryContext: queryContext, 
                        shaperCommandContext: SelectExpression: 
                            SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
                            FROM "User" AS "e"
                            WHERE "e"."Id" = @__get_Item_0
                            LIMIT 1, 
                        shaper: TypedCompositeShaper<BufferedOffsetEntityShaper<User>, User, BufferedOffsetEntityShaper<Password>, Password, TransparentIdentifier<User, Password>>), 
                    selector: (TransparentIdentifier<User, Password> t1) => User _Include(
                        queryContext: queryContext, 
                        entity: t1.Outer, 
                        included: new object[]{ t1.Inner }, 
                        fixup: (QueryContext queryContext | User entity | Object[] included) => 
                        {
                            Void queryContext.QueryBuffer.StartTracking(
                                entity: entity, 
                                entityType: EntityType: User)
                            return !(bool ReferenceEquals(included[0], null)) ? 
                            {
                                Void queryContext.QueryBuffer.StartTracking(
                                    entity: included[0], 
                                    entityType: EntityType: User.Password#Password)
                                return Void SetRelationshipSnapshotValue(
                                    stateManager: queryContext.StateManager, 
                                    navigation: User.Password, 
                                    entity: entity, 
                                    value: included[0])
                            }
                             : default(Void)
                        }
                    )), 
                cancellationToken: Unhandled parameter: queryContext.CancellationToken)), 
        queryContext: Unhandled parameter: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: DataAccess.DbSessionProvider, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: Unhandled parameter: queryContext)Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[@__get_Item_0='?'], CommandType='Text', CommandTimeout='30']
SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
FROM "User" AS "e"
WHERE "e"."Id" = @__get_Item_0
LIMIT 1Failed executing DbCommand (735ms) [Parameters=[@__get_Item_0='?'], CommandType='Text', CommandTimeout='30']
SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
FROM "User" AS "e"
WHERE "e"."Id" = @__get_Item_0
LIMIT 1An exception occurred in the database while iterating the results of a query for context type 'DataAccess.DbSessionProvider'.
Npgsql.PostgresException (0x80004005): 42703: column e.AlumniProfileId does not exist
   at Npgsql.NpgsqlConnector.<DoReadMessage>d__148.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlConnector.<ReadExpecting>d__154`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<NextResult>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<<NextResultAsync>b__31_0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<Execute>d__71.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReader>d__92.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<>c__DisplayClass90_0.<<ExecuteDbDataReaderAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.<ExecuteAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.NpgsqlExecutionStrategy.<ExecuteAsync>d__7`2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<FirstOrDefault_>d__165`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()An exception occurred in the database while iterating the results of a query for context type 'DataAccess.DbSessionProvider'.
Npgsql.PostgresException (0x80004005): 42703: column e.AlumniProfileId does not exist
   at Npgsql.NpgsqlConnector.<DoReadMessage>d__148.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlConnector.<ReadExpecting>d__154`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<NextResult>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<<NextResultAsync>b__31_0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<Execute>d__71.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReader>d__92.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<>c__DisplayClass90_0.<<ExecuteDbDataReaderAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.<ExecuteAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.NpgsqlExecutionStrategy.<ExecuteAsync>d__7`2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<FirstOrDefault_>d__165`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<ExecuteSingletonAsyncQuery>d__23`1.MoveNext()An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneOpening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Executed DbCommand (55ms) [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "User" (
    "Id" serial NOT NULL,
    "AlumniProfileId" int4 NULL,
    "AuthentificatedAt" timestamptz NULL,
    "CreatedTime" timestamptz NOT NULL,
    "Email" text NULL,
    "FirstName" text NOT NULL,
    "IsDeleted" bool NOT NULL,
    "IsMiptAlumni" bool NOT NULL,
    "LastName" text NOT NULL,
    "Role" int4 NOT NULL,
    "Password_Hash" text NULL,
    CONSTRAINT "PK_User" PRIMARY KEY ("Id")
);Executed DbCommand (79ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "User" (
    "Id" serial NOT NULL,
    "AlumniProfileId" int4 NULL,
    "AuthentificatedAt" timestamptz NULL,
    "CreatedTime" timestamptz NOT NULL,
    "Email" text NULL,
    "FirstName" text NOT NULL,
    "IsDeleted" bool NOT NULL,
    "IsMiptAlumni" bool NOT NULL,
    "LastName" text NOT NULL,
    "Role" int4 NOT NULL,
    "Password_Hash" text NULL,
    CONSTRAINT "PK_User" PRIMARY KEY ("Id")
);Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "AlumniProfile" (
    "Id" serial NOT NULL,
    "Diploma" int4 NOT NULL,
    "Faculty" int4 NOT NULL,
    "UserFk" int4 NOT NULL,
    "YearOfGraduation" int4 NOT NULL,
    CONSTRAINT "PK_AlumniProfile" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AlumniProfile_User_UserFk" FOREIGN KEY ("UserFk") REFERENCES "User" ("Id") ON DELETE CASCADE
);Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "AlumniProfile" (
    "Id" serial NOT NULL,
    "Diploma" int4 NOT NULL,
    "Faculty" int4 NOT NULL,
    "UserFk" int4 NOT NULL,
    "YearOfGraduation" int4 NOT NULL,
    CONSTRAINT "PK_AlumniProfile" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AlumniProfile_User_UserFk" FOREIGN KEY ("UserFk") REFERENCES "User" ("Id") ON DELETE CASCADE
);Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX "IX_AlumniProfile_UserFk" ON "AlumniProfile" ("UserFk");Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX "IX_AlumniProfile_UserFk" ON "AlumniProfile" ("UserFk");Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX "IX_User_AlumniProfileId" ON "User" ("AlumniProfileId");Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX "IX_User_AlumniProfileId" ON "User" ("AlumniProfileId");Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_Email" ON "User" ("Email");Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_Email" ON "User" ("Email");Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE "User" ADD CONSTRAINT "FK_User_AlumniProfile_AlumniProfileId" FOREIGN KEY ("AlumniProfileId") REFERENCES "AlumniProfile" ("Id") ON DELETE NO ACTION;Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE "User" ADD CONSTRAINT "FK_User_AlumniProfile_AlumniProfileId" FOREIGN KEY ("AlumniProfileId") REFERENCES "AlumniProfile" ("Id") ON DELETE NO ACTION;Committing transaction.Disposing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneCompiling query model: 
'from User object in DbSet<User>
where !([object].IsDeleted)
select [object]'Including navigation: '[object].Password'Optimized query model: 
'from User object in DbSet<User>
join Password object.Password in DbSet<Password>
on Property([object], "Id") equals Property([object.Password], "UserId") into object.Password_group
from Password object.Password in 
    (from Password object.Password_groupItem in [object.Password_group]
    select [object.Password_groupItem]).DefaultIfEmpty()
where !([object].IsDeleted)
select User _Include(
    queryContext: queryContext, 
    entity: [object], 
    included: new object[]{ [object.Password] }, 
    fixup: (QueryContext queryContext | User entity | Object[] included) => 
    {
        Void queryContext.QueryBuffer.StartTracking(
            entity: entity, 
            entityType: EntityType: User)
        return !(bool ReferenceEquals(included[0], null)) ? 
        {
            Void queryContext.QueryBuffer.StartTracking(
                entity: included[0], 
                entityType: EntityType: User.Password#Password)
            return Void SetRelationshipSnapshotValue(
                stateManager: queryContext.StateManager, 
                navigation: User.Password, 
                entity: entity, 
                value: included[0])
        }
         : default(Void)
    }
)'(QueryContext queryContext) => IAsyncEnumerable<User> _InterceptExceptions(
    source: IAsyncEnumerable<User> _TrackEntities(
        results: IAsyncEnumerable<User> _Select(
            source: IAsyncEnumerable<TransparentIdentifier<User, Password>> _ShapedQuery(
                queryContext: queryContext, 
                shaperCommandContext: SelectExpression: 
                    SELECT "object"."Id", "object"."AlumniProfileId", "object"."AuthentificatedAt", "object"."CreatedTime", "object"."Email", "object"."FirstName", "object"."IsDeleted", "object"."IsMiptAlumni", "object"."LastName", "object"."Role", "object"."Id", "object"."Password_Hash"
                    FROM "User" AS "object"
                    WHERE "object"."IsDeleted" = FALSE, 
                shaper: TypedCompositeShaper<BufferedOffsetEntityShaper<User>, User, BufferedOffsetEntityShaper<Password>, Password, TransparentIdentifier<User, Password>>), 
            selector: (TransparentIdentifier<User, Password> t1) => User _Include(
                queryContext: queryContext, 
                entity: t1.Outer, 
                included: new object[]{ t1.Inner }, 
                fixup: (QueryContext queryContext | User entity | Object[] included) => 
                {
                    Void queryContext.QueryBuffer.StartTracking(
                        entity: entity, 
                        entityType: EntityType: User)
                    return !(bool ReferenceEquals(included[0], null)) ? 
                    {
                        Void queryContext.QueryBuffer.StartTracking(
                            entity: included[0], 
                            entityType: EntityType: User.Password#Password)
                        return Void SetRelationshipSnapshotValue(
                            stateManager: queryContext.StateManager, 
                            navigation: User.Password, 
                            entity: entity, 
                            value: included[0])
                    }
                     : default(Void)
                }
            )), 
        queryContext: Unhandled parameter: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: DataAccess.DbSessionProvider, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: Unhandled parameter: queryContext)Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "object"."Id", "object"."AlumniProfileId", "object"."AuthentificatedAt", "object"."CreatedTime", "object"."Email", "object"."FirstName", "object"."IsDeleted", "object"."IsMiptAlumni", "object"."LastName", "object"."Role", "object"."Id", "object"."Password_Hash"
FROM "User" AS "object"
WHERE "object"."IsDeleted" = FALSEExecuted DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "object"."Id", "object"."AlumniProfileId", "object"."AuthentificatedAt", "object"."CreatedTime", "object"."Email", "object"."FirstName", "object"."IsDeleted", "object"."IsMiptAlumni", "object"."LastName", "object"."Role", "object"."Id", "object"."Password_Hash"
FROM "User" AS "object"
WHERE "object"."IsDeleted" = FALSEA data reader was disposed.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneOpening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "User" ("AlumniProfileId", "AuthentificatedAt", "CreatedTime", "Email", "FirstName", "IsDeleted", "IsMiptAlumni", "LastName", "Role", "Password_Hash")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "Id";Executed DbCommand (65ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "User" ("AlumniProfileId", "AuthentificatedAt", "CreatedTime", "Email", "FirstName", "IsDeleted", "IsMiptAlumni", "LastName", "Role", "Password_Hash")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "Id";A data reader was disposed.Committing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Disposing transaction.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneCompiling query model: 
'(from User e in DbSet<User>
where Property([e], "Id") == __get_Item_0
select [e]).FirstOrDefault()'Including navigation: '[e].Password'Optimized query model: 
'(from User e in DbSet<User>
join Password e.Password in DbSet<Password>
on Property([e], "Id") equals Property([e.Password], "UserId") into e.Password_group
from Password e.Password in 
    (from Password e.Password_groupItem in [e.Password_group]
    select [e.Password_groupItem]).DefaultIfEmpty()
where Property([e], "Id") == __get_Item_0
select User _Include(
    queryContext: queryContext, 
    entity: [e], 
    included: new object[]{ [e.Password] }, 
    fixup: (QueryContext queryContext | User entity | Object[] included) => 
    {
        Void queryContext.QueryBuffer.StartTracking(
            entity: entity, 
            entityType: EntityType: User)
        return !(bool ReferenceEquals(included[0], null)) ? 
        {
            Void queryContext.QueryBuffer.StartTracking(
                entity: included[0], 
                entityType: EntityType: User.Password#Password)
            return Void SetRelationshipSnapshotValue(
                stateManager: queryContext.StateManager, 
                navigation: User.Password, 
                entity: entity, 
                value: included[0])
        }
         : default(Void)
    }
)).FirstOrDefault()'(QueryContext queryContext) => IAsyncEnumerable<User> _InterceptExceptions(
    source: IAsyncEnumerable<User> _TrackEntities(
        results: IAsyncEnumerable<User> _ToSequence(Task<User> FirstOrDefault(
                source: IAsyncEnumerable<User> _Select(
                    source: IAsyncEnumerable<TransparentIdentifier<User, Password>> _ShapedQuery(
                        queryContext: queryContext, 
                        shaperCommandContext: SelectExpression: 
                            SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
                            FROM "User" AS "e"
                            WHERE "e"."Id" = @__get_Item_0
                            LIMIT 1, 
                        shaper: TypedCompositeShaper<BufferedOffsetEntityShaper<User>, User, BufferedOffsetEntityShaper<Password>, Password, TransparentIdentifier<User, Password>>), 
                    selector: (TransparentIdentifier<User, Password> t1) => User _Include(
                        queryContext: queryContext, 
                        entity: t1.Outer, 
                        included: new object[]{ t1.Inner }, 
                        fixup: (QueryContext queryContext | User entity | Object[] included) => 
                        {
                            Void queryContext.QueryBuffer.StartTracking(
                                entity: entity, 
                                entityType: EntityType: User)
                            return !(bool ReferenceEquals(included[0], null)) ? 
                            {
                                Void queryContext.QueryBuffer.StartTracking(
                                    entity: included[0], 
                                    entityType: EntityType: User.Password#Password)
                                return Void SetRelationshipSnapshotValue(
                                    stateManager: queryContext.StateManager, 
                                    navigation: User.Password, 
                                    entity: entity, 
                                    value: included[0])
                            }
                             : default(Void)
                        }
                    )), 
                cancellationToken: Unhandled parameter: queryContext.CancellationToken)), 
        queryContext: Unhandled parameter: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: DataAccess.DbSessionProvider, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: Unhandled parameter: queryContext)Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[@__get_Item_0='?'], CommandType='Text', CommandTimeout='30']
SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
FROM "User" AS "e"
WHERE "e"."Id" = @__get_Item_0
LIMIT 1Executed DbCommand (35ms) [Parameters=[@__get_Item_0='?'], CommandType='Text', CommandTimeout='30']
SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
FROM "User" AS "e"
WHERE "e"."Id" = @__get_Item_0
LIMIT 1A data reader was disposed.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AlumniProfile" ("Diploma", "Faculty", "UserFk", "YearOfGraduation")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";Failed executing DbCommand (911ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AlumniProfile" ("Diploma", "Faculty", "UserFk", "YearOfGraduation")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";Disposing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An exception occurred in the database while saving changes for context type 'DataAccess.DbSessionProvider'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> Npgsql.PostgresException: 23503: insert or update on table "AlumniProfile" violates foreign key constraint "FK_AlumniProfile_User_UserFk"
   at Npgsql.NpgsqlConnector.<DoReadMessage>d__148.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<NextResult>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<<NextResultAsync>b__31_0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<Execute>d__71.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReader>d__92.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<>c__DisplayClass90_0.<<ExecuteDbDataReaderAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.<ExecuteAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.NpgsqlExecutionStrategy.<ExecuteAsync>d__7`2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneOpening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Executed DbCommand (37ms) [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneOpening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "User" (
    "Id" serial NOT NULL,
    "AlumniProfileId" int4 NULL,
    "AuthentificatedAt" timestamptz NULL,
    "CreatedTime" timestamptz NOT NULL,
    "Email" text NULL,
    "FirstName" text NOT NULL,
    "IsDeleted" bool NOT NULL,
    "IsMiptAlumni" bool NOT NULL,
    "LastName" text NOT NULL,
    "Role" int4 NOT NULL,
    "Password_Hash" text NULL,
    CONSTRAINT "PK_User" PRIMARY KEY ("Id")
);Executed DbCommand (102ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "User" (
    "Id" serial NOT NULL,
    "AlumniProfileId" int4 NULL,
    "AuthentificatedAt" timestamptz NULL,
    "CreatedTime" timestamptz NOT NULL,
    "Email" text NULL,
    "FirstName" text NOT NULL,
    "IsDeleted" bool NOT NULL,
    "IsMiptAlumni" bool NOT NULL,
    "LastName" text NOT NULL,
    "Role" int4 NOT NULL,
    "Password_Hash" text NULL,
    CONSTRAINT "PK_User" PRIMARY KEY ("Id")
);Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "AlumniProfile" (
    "Id" serial NOT NULL,
    "Diploma" int4 NOT NULL,
    "Faculty" int4 NOT NULL,
    "UserFk" int4 NOT NULL,
    "UserId" int4 NULL,
    "YearOfGraduation" int4 NOT NULL,
    CONSTRAINT "PK_AlumniProfile" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AlumniProfile_User_UserId" FOREIGN KEY ("UserId") REFERENCES "User" ("Id") ON DELETE NO ACTION
);Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "AlumniProfile" (
    "Id" serial NOT NULL,
    "Diploma" int4 NOT NULL,
    "Faculty" int4 NOT NULL,
    "UserFk" int4 NOT NULL,
    "UserId" int4 NULL,
    "YearOfGraduation" int4 NOT NULL,
    CONSTRAINT "PK_AlumniProfile" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AlumniProfile_User_UserId" FOREIGN KEY ("UserId") REFERENCES "User" ("Id") ON DELETE NO ACTION
);Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX "IX_AlumniProfile_UserId" ON "AlumniProfile" ("UserId");Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX "IX_AlumniProfile_UserId" ON "AlumniProfile" ("UserId");Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX "IX_User_AlumniProfileId" ON "User" ("AlumniProfileId");Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX "IX_User_AlumniProfileId" ON "User" ("AlumniProfileId");Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_Email" ON "User" ("Email");Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_Email" ON "User" ("Email");Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE "User" ADD CONSTRAINT "FK_User_AlumniProfile_AlumniProfileId" FOREIGN KEY ("AlumniProfileId") REFERENCES "AlumniProfile" ("Id") ON DELETE NO ACTION;Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE "User" ADD CONSTRAINT "FK_User_AlumniProfile_AlumniProfileId" FOREIGN KEY ("AlumniProfileId") REFERENCES "AlumniProfile" ("Id") ON DELETE NO ACTION;Committing transaction.Disposing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneOpening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "User" ("AlumniProfileId", "AuthentificatedAt", "CreatedTime", "Email", "FirstName", "IsDeleted", "IsMiptAlumni", "LastName", "Role", "Password_Hash")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "Id";Executed DbCommand (87ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "User" ("AlumniProfileId", "AuthentificatedAt", "CreatedTime", "Email", "FirstName", "IsDeleted", "IsMiptAlumni", "LastName", "Role", "Password_Hash")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "Id";A data reader was disposed.Committing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Disposing transaction.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneCompiling query model: 
'(from User e in DbSet<User>
where Property([e], "Id") == __get_Item_0
select [e]).FirstOrDefault()'Including navigation: '[e].Password'Optimized query model: 
'(from User e in DbSet<User>
join Password e.Password in DbSet<Password>
on Property([e], "Id") equals Property([e.Password], "UserId") into e.Password_group
from Password e.Password in 
    (from Password e.Password_groupItem in [e.Password_group]
    select [e.Password_groupItem]).DefaultIfEmpty()
where Property([e], "Id") == __get_Item_0
select User _Include(
    queryContext: queryContext, 
    entity: [e], 
    included: new object[]{ [e.Password] }, 
    fixup: (QueryContext queryContext | User entity | Object[] included) => 
    {
        Void queryContext.QueryBuffer.StartTracking(
            entity: entity, 
            entityType: EntityType: User)
        return !(bool ReferenceEquals(included[0], null)) ? 
        {
            Void queryContext.QueryBuffer.StartTracking(
                entity: included[0], 
                entityType: EntityType: User.Password#Password)
            return Void SetRelationshipSnapshotValue(
                stateManager: queryContext.StateManager, 
                navigation: User.Password, 
                entity: entity, 
                value: included[0])
        }
         : default(Void)
    }
)).FirstOrDefault()'(QueryContext queryContext) => IAsyncEnumerable<User> _InterceptExceptions(
    source: IAsyncEnumerable<User> _TrackEntities(
        results: IAsyncEnumerable<User> _ToSequence(Task<User> FirstOrDefault(
                source: IAsyncEnumerable<User> _Select(
                    source: IAsyncEnumerable<TransparentIdentifier<User, Password>> _ShapedQuery(
                        queryContext: queryContext, 
                        shaperCommandContext: SelectExpression: 
                            SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
                            FROM "User" AS "e"
                            WHERE "e"."Id" = @__get_Item_0
                            LIMIT 1, 
                        shaper: TypedCompositeShaper<BufferedOffsetEntityShaper<User>, User, BufferedOffsetEntityShaper<Password>, Password, TransparentIdentifier<User, Password>>), 
                    selector: (TransparentIdentifier<User, Password> t1) => User _Include(
                        queryContext: queryContext, 
                        entity: t1.Outer, 
                        included: new object[]{ t1.Inner }, 
                        fixup: (QueryContext queryContext | User entity | Object[] included) => 
                        {
                            Void queryContext.QueryBuffer.StartTracking(
                                entity: entity, 
                                entityType: EntityType: User)
                            return !(bool ReferenceEquals(included[0], null)) ? 
                            {
                                Void queryContext.QueryBuffer.StartTracking(
                                    entity: included[0], 
                                    entityType: EntityType: User.Password#Password)
                                return Void SetRelationshipSnapshotValue(
                                    stateManager: queryContext.StateManager, 
                                    navigation: User.Password, 
                                    entity: entity, 
                                    value: included[0])
                            }
                             : default(Void)
                        }
                    )), 
                cancellationToken: Unhandled parameter: queryContext.CancellationToken)), 
        queryContext: Unhandled parameter: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: DataAccess.DbSessionProvider, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: Unhandled parameter: queryContext)Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[@__get_Item_0='?'], CommandType='Text', CommandTimeout='30']
SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
FROM "User" AS "e"
WHERE "e"."Id" = @__get_Item_0
LIMIT 1Executed DbCommand (31ms) [Parameters=[@__get_Item_0='?'], CommandType='Text', CommandTimeout='30']
SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
FROM "User" AS "e"
WHERE "e"."Id" = @__get_Item_0
LIMIT 1A data reader was disposed.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AlumniProfile" ("Diploma", "Faculty", "UserFk", "UserId", "YearOfGraduation")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";Executed DbCommand (73ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AlumniProfile" ("Diploma", "Faculty", "UserFk", "UserId", "YearOfGraduation")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";A data reader was disposed.Executing DbCommand [Parameters=[@p14='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?', @p13='?'], CommandType='Text', CommandTimeout='30']
UPDATE "User" SET "AlumniProfileId" = @p5, "AuthentificatedAt" = @p6, "CreatedTime" = @p7, "Email" = @p8, "FirstName" = @p9, "IsDeleted" = @p10, "IsMiptAlumni" = @p11, "LastName" = @p12, "Role" = @p13
WHERE "Id" = @p14;Executed DbCommand (9ms) [Parameters=[@p14='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?', @p13='?'], CommandType='Text', CommandTimeout='30']
UPDATE "User" SET "AlumniProfileId" = @p5, "AuthentificatedAt" = @p6, "CreatedTime" = @p7, "Email" = @p8, "FirstName" = @p9, "IsDeleted" = @p10, "IsMiptAlumni" = @p11, "LastName" = @p12, "Role" = @p13
WHERE "Id" = @p14;A data reader was disposed.Committing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Disposing transaction.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneCompiling query model: 
'(from User e in DbSet<User>
where Property([e], "Id") == __get_Item_0
select [e]).FirstOrDefault()'Including navigation: '[e].Password'Optimized query model: 
'(from User e in DbSet<User>
join Password e.Password in DbSet<Password>
on Property([e], "Id") equals Property([e.Password], "UserId") into e.Password_group
from Password e.Password in 
    (from Password e.Password_groupItem in [e.Password_group]
    select [e.Password_groupItem]).DefaultIfEmpty()
where Property([e], "Id") == __get_Item_0
select User _Include(
    queryContext: queryContext, 
    entity: [e], 
    included: new object[]{ [e.Password] }, 
    fixup: (QueryContext queryContext | User entity | Object[] included) => 
    {
        Void queryContext.QueryBuffer.StartTracking(
            entity: entity, 
            entityType: EntityType: User)
        return !(bool ReferenceEquals(included[0], null)) ? 
        {
            Void queryContext.QueryBuffer.StartTracking(
                entity: included[0], 
                entityType: EntityType: User.Password#Password)
            return Void SetRelationshipSnapshotValue(
                stateManager: queryContext.StateManager, 
                navigation: User.Password, 
                entity: entity, 
                value: included[0])
        }
         : default(Void)
    }
)).FirstOrDefault()'(QueryContext queryContext) => IAsyncEnumerable<User> _InterceptExceptions(
    source: IAsyncEnumerable<User> _TrackEntities(
        results: IAsyncEnumerable<User> _ToSequence(Task<User> FirstOrDefault(
                source: IAsyncEnumerable<User> _Select(
                    source: IAsyncEnumerable<TransparentIdentifier<User, Password>> _ShapedQuery(
                        queryContext: queryContext, 
                        shaperCommandContext: SelectExpression: 
                            SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
                            FROM "User" AS "e"
                            WHERE "e"."Id" = @__get_Item_0
                            LIMIT 1, 
                        shaper: TypedCompositeShaper<BufferedOffsetEntityShaper<User>, User, BufferedOffsetEntityShaper<Password>, Password, TransparentIdentifier<User, Password>>), 
                    selector: (TransparentIdentifier<User, Password> t1) => User _Include(
                        queryContext: queryContext, 
                        entity: t1.Outer, 
                        included: new object[]{ t1.Inner }, 
                        fixup: (QueryContext queryContext | User entity | Object[] included) => 
                        {
                            Void queryContext.QueryBuffer.StartTracking(
                                entity: entity, 
                                entityType: EntityType: User)
                            return !(bool ReferenceEquals(included[0], null)) ? 
                            {
                                Void queryContext.QueryBuffer.StartTracking(
                                    entity: included[0], 
                                    entityType: EntityType: User.Password#Password)
                                return Void SetRelationshipSnapshotValue(
                                    stateManager: queryContext.StateManager, 
                                    navigation: User.Password, 
                                    entity: entity, 
                                    value: included[0])
                            }
                             : default(Void)
                        }
                    )), 
                cancellationToken: Unhandled parameter: queryContext.CancellationToken)), 
        queryContext: Unhandled parameter: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: DataAccess.DbSessionProvider, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: Unhandled parameter: queryContext)Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[@__get_Item_0='?'], CommandType='Text', CommandTimeout='30']
SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
FROM "User" AS "e"
WHERE "e"."Id" = @__get_Item_0
LIMIT 1Executed DbCommand (40ms) [Parameters=[@__get_Item_0='?'], CommandType='Text', CommandTimeout='30']
SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
FROM "User" AS "e"
WHERE "e"."Id" = @__get_Item_0
LIMIT 1A data reader was disposed.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AlumniProfile" ("Diploma", "Faculty", "UserFk", "UserId", "YearOfGraduation")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";Executed DbCommand (28ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AlumniProfile" ("Diploma", "Faculty", "UserFk", "UserId", "YearOfGraduation")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";A data reader was disposed.Executing DbCommand [Parameters=[@p14='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?', @p13='?'], CommandType='Text', CommandTimeout='30']
UPDATE "User" SET "AlumniProfileId" = @p5, "AuthentificatedAt" = @p6, "CreatedTime" = @p7, "Email" = @p8, "FirstName" = @p9, "IsDeleted" = @p10, "IsMiptAlumni" = @p11, "LastName" = @p12, "Role" = @p13
WHERE "Id" = @p14;Executed DbCommand (85ms) [Parameters=[@p14='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?', @p13='?'], CommandType='Text', CommandTimeout='30']
UPDATE "User" SET "AlumniProfileId" = @p5, "AuthentificatedAt" = @p6, "CreatedTime" = @p7, "Email" = @p8, "FirstName" = @p9, "IsDeleted" = @p10, "IsMiptAlumni" = @p11, "LastName" = @p12, "Role" = @p13
WHERE "Id" = @p14;A data reader was disposed.Committing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Disposing transaction.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneCompiling query model: 
'(from User e in DbSet<User>
where Property([e], "Id") == __get_Item_0
select [e]).FirstOrDefault()'Including navigation: '[e].Password'Optimized query model: 
'(from User e in DbSet<User>
join Password e.Password in DbSet<Password>
on Property([e], "Id") equals Property([e.Password], "UserId") into e.Password_group
from Password e.Password in 
    (from Password e.Password_groupItem in [e.Password_group]
    select [e.Password_groupItem]).DefaultIfEmpty()
where Property([e], "Id") == __get_Item_0
select User _Include(
    queryContext: queryContext, 
    entity: [e], 
    included: new object[]{ [e.Password] }, 
    fixup: (QueryContext queryContext | User entity | Object[] included) => 
    {
        Void queryContext.QueryBuffer.StartTracking(
            entity: entity, 
            entityType: EntityType: User)
        return !(bool ReferenceEquals(included[0], null)) ? 
        {
            Void queryContext.QueryBuffer.StartTracking(
                entity: included[0], 
                entityType: EntityType: User.Password#Password)
            return Void SetRelationshipSnapshotValue(
                stateManager: queryContext.StateManager, 
                navigation: User.Password, 
                entity: entity, 
                value: included[0])
        }
         : default(Void)
    }
)).FirstOrDefault()'(QueryContext queryContext) => IAsyncEnumerable<User> _InterceptExceptions(
    source: IAsyncEnumerable<User> _TrackEntities(
        results: IAsyncEnumerable<User> _ToSequence(Task<User> FirstOrDefault(
                source: IAsyncEnumerable<User> _Select(
                    source: IAsyncEnumerable<TransparentIdentifier<User, Password>> _ShapedQuery(
                        queryContext: queryContext, 
                        shaperCommandContext: SelectExpression: 
                            SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
                            FROM "User" AS "e"
                            WHERE "e"."Id" = @__get_Item_0
                            LIMIT 1, 
                        shaper: TypedCompositeShaper<BufferedOffsetEntityShaper<User>, User, BufferedOffsetEntityShaper<Password>, Password, TransparentIdentifier<User, Password>>), 
                    selector: (TransparentIdentifier<User, Password> t1) => User _Include(
                        queryContext: queryContext, 
                        entity: t1.Outer, 
                        included: new object[]{ t1.Inner }, 
                        fixup: (QueryContext queryContext | User entity | Object[] included) => 
                        {
                            Void queryContext.QueryBuffer.StartTracking(
                                entity: entity, 
                                entityType: EntityType: User)
                            return !(bool ReferenceEquals(included[0], null)) ? 
                            {
                                Void queryContext.QueryBuffer.StartTracking(
                                    entity: included[0], 
                                    entityType: EntityType: User.Password#Password)
                                return Void SetRelationshipSnapshotValue(
                                    stateManager: queryContext.StateManager, 
                                    navigation: User.Password, 
                                    entity: entity, 
                                    value: included[0])
                            }
                             : default(Void)
                        }
                    )), 
                cancellationToken: Unhandled parameter: queryContext.CancellationToken)), 
        queryContext: Unhandled parameter: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: DataAccess.DbSessionProvider, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: Unhandled parameter: queryContext)Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[@__get_Item_0='?'], CommandType='Text', CommandTimeout='30']
SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
FROM "User" AS "e"
WHERE "e"."Id" = @__get_Item_0
LIMIT 1Executed DbCommand (75ms) [Parameters=[@__get_Item_0='?'], CommandType='Text', CommandTimeout='30']
SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
FROM "User" AS "e"
WHERE "e"."Id" = @__get_Item_0
LIMIT 1A data reader was disposed.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneOpening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "User" (
    "Id" serial NOT NULL,
    "AlumniProfileId" int4 NOT NULL,
    "AuthentificatedAt" timestamptz NULL,
    "CreatedTime" timestamptz NOT NULL,
    "Email" text NULL,
    "FirstName" text NOT NULL,
    "IsDeleted" bool NOT NULL,
    "IsMiptAlumni" bool NOT NULL,
    "LastName" text NOT NULL,
    "Role" int4 NOT NULL,
    "Password_Hash" text NULL,
    CONSTRAINT "PK_User" PRIMARY KEY ("Id")
);Executed DbCommand (58ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "User" (
    "Id" serial NOT NULL,
    "AlumniProfileId" int4 NOT NULL,
    "AuthentificatedAt" timestamptz NULL,
    "CreatedTime" timestamptz NOT NULL,
    "Email" text NULL,
    "FirstName" text NOT NULL,
    "IsDeleted" bool NOT NULL,
    "IsMiptAlumni" bool NOT NULL,
    "LastName" text NOT NULL,
    "Role" int4 NOT NULL,
    "Password_Hash" text NULL,
    CONSTRAINT "PK_User" PRIMARY KEY ("Id")
);Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "AlumniProfile" (
    "Id" serial NOT NULL,
    "Diploma" int4 NOT NULL,
    "Faculty" int4 NOT NULL,
    "UserFk" int4 NOT NULL,
    "UserId" int4 NULL,
    "YearOfGraduation" int4 NOT NULL,
    CONSTRAINT "PK_AlumniProfile" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AlumniProfile_User_UserId" FOREIGN KEY ("UserId") REFERENCES "User" ("Id") ON DELETE NO ACTION
);Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "AlumniProfile" (
    "Id" serial NOT NULL,
    "Diploma" int4 NOT NULL,
    "Faculty" int4 NOT NULL,
    "UserFk" int4 NOT NULL,
    "UserId" int4 NULL,
    "YearOfGraduation" int4 NOT NULL,
    CONSTRAINT "PK_AlumniProfile" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AlumniProfile_User_UserId" FOREIGN KEY ("UserId") REFERENCES "User" ("Id") ON DELETE NO ACTION
);Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX "IX_AlumniProfile_UserId" ON "AlumniProfile" ("UserId");Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX "IX_AlumniProfile_UserId" ON "AlumniProfile" ("UserId");Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX "IX_User_AlumniProfileId" ON "User" ("AlumniProfileId");Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX "IX_User_AlumniProfileId" ON "User" ("AlumniProfileId");Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_Email" ON "User" ("Email");Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_Email" ON "User" ("Email");Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE "User" ADD CONSTRAINT "FK_User_AlumniProfile_AlumniProfileId" FOREIGN KEY ("AlumniProfileId") REFERENCES "AlumniProfile" ("Id") ON DELETE CASCADE;Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE "User" ADD CONSTRAINT "FK_User_AlumniProfile_AlumniProfileId" FOREIGN KEY ("AlumniProfileId") REFERENCES "AlumniProfile" ("Id") ON DELETE CASCADE;Committing transaction.Disposing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneOpening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "User" ("AlumniProfileId", "AuthentificatedAt", "CreatedTime", "Email", "FirstName", "IsDeleted", "IsMiptAlumni", "LastName", "Role", "Password_Hash")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "Id";Failed executing DbCommand (389ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "User" ("AlumniProfileId", "AuthentificatedAt", "CreatedTime", "Email", "FirstName", "IsDeleted", "IsMiptAlumni", "LastName", "Role", "Password_Hash")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "Id";Disposing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An exception occurred in the database while saving changes for context type 'DataAccess.DbSessionProvider'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> Npgsql.PostgresException: 23502: null value in column "AlumniProfileId" violates not-null constraint
   at Npgsql.NpgsqlConnector.<DoReadMessage>d__148.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<NextResult>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<<NextResultAsync>b__31_0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<Execute>d__71.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReader>d__92.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<>c__DisplayClass90_0.<<ExecuteDbDataReaderAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.<ExecuteAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.NpgsqlExecutionStrategy.<ExecuteAsync>d__7`2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneOpening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneOpening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "User" ("AlumniProfileId", "AuthentificatedAt", "CreatedTime", "Email", "FirstName", "IsDeleted", "IsMiptAlumni", "LastName", "Role", "Password_Hash")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "Id";Failed executing DbCommand (771ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "User" ("AlumniProfileId", "AuthentificatedAt", "CreatedTime", "Email", "FirstName", "IsDeleted", "IsMiptAlumni", "LastName", "Role", "Password_Hash")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "Id";Disposing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An exception occurred in the database while saving changes for context type 'DataAccess.DbSessionProvider'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> Npgsql.PostgresException: 23502: null value in column "AlumniProfileId" violates not-null constraint
   at Npgsql.NpgsqlConnector.<DoReadMessage>d__148.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<NextResult>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<<NextResultAsync>b__31_0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<Execute>d__71.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReader>d__92.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<>c__DisplayClass90_0.<<ExecuteDbDataReaderAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.<ExecuteAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.NpgsqlExecutionStrategy.<ExecuteAsync>d__7`2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneOpening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "AlumniProfile" (
    "Id" serial NOT NULL,
    "Diploma" int4 NOT NULL,
    "Faculty" int4 NOT NULL,
    "YearOfGraduation" int4 NOT NULL,
    CONSTRAINT "PK_AlumniProfile" PRIMARY KEY ("Id")
);Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "AlumniProfile" (
    "Id" serial NOT NULL,
    "Diploma" int4 NOT NULL,
    "Faculty" int4 NOT NULL,
    "YearOfGraduation" int4 NOT NULL,
    CONSTRAINT "PK_AlumniProfile" PRIMARY KEY ("Id")
);Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "User" (
    "Id" serial NOT NULL,
    "AlumniProfileId" int4 NOT NULL,
    "AuthentificatedAt" timestamptz NULL,
    "CreatedTime" timestamptz NOT NULL,
    "Email" text NULL,
    "FirstName" text NOT NULL,
    "IsDeleted" bool NOT NULL,
    "IsMiptAlumni" bool NOT NULL,
    "LastName" text NOT NULL,
    "Role" int4 NOT NULL,
    "Password_Hash" text NULL,
    CONSTRAINT "PK_User" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_User_AlumniProfile_AlumniProfileId" FOREIGN KEY ("AlumniProfileId") REFERENCES "AlumniProfile" ("Id") ON DELETE CASCADE
);Executed DbCommand (41ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "User" (
    "Id" serial NOT NULL,
    "AlumniProfileId" int4 NOT NULL,
    "AuthentificatedAt" timestamptz NULL,
    "CreatedTime" timestamptz NOT NULL,
    "Email" text NULL,
    "FirstName" text NOT NULL,
    "IsDeleted" bool NOT NULL,
    "IsMiptAlumni" bool NOT NULL,
    "LastName" text NOT NULL,
    "Role" int4 NOT NULL,
    "Password_Hash" text NULL,
    CONSTRAINT "PK_User" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_User_AlumniProfile_AlumniProfileId" FOREIGN KEY ("AlumniProfileId") REFERENCES "AlumniProfile" ("Id") ON DELETE CASCADE
);Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX "IX_User_AlumniProfileId" ON "User" ("AlumniProfileId");Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX "IX_User_AlumniProfileId" ON "User" ("AlumniProfileId");Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_Email" ON "User" ("Email");Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_Email" ON "User" ("Email");Committing transaction.Disposing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneOpening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "User" ("AlumniProfileId", "AuthentificatedAt", "CreatedTime", "Email", "FirstName", "IsDeleted", "IsMiptAlumni", "LastName", "Role", "Password_Hash")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "Id";Failed executing DbCommand (400ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "User" ("AlumniProfileId", "AuthentificatedAt", "CreatedTime", "Email", "FirstName", "IsDeleted", "IsMiptAlumni", "LastName", "Role", "Password_Hash")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "Id";Disposing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An exception occurred in the database while saving changes for context type 'DataAccess.DbSessionProvider'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> Npgsql.PostgresException: 23502: null value in column "AlumniProfileId" violates not-null constraint
   at Npgsql.NpgsqlConnector.<DoReadMessage>d__148.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<NextResult>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<<NextResultAsync>b__31_0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<Execute>d__71.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReader>d__92.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<>c__DisplayClass90_0.<<ExecuteDbDataReaderAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.<ExecuteAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.NpgsqlExecutionStrategy.<ExecuteAsync>d__7`2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneOpening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']

                    SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
                    FROM information_schema.tables
                    WHERE table_type = 'BASE TABLE' AND table_schema NOT IN ('pg_catalog', 'information_schema')Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "User" (
    "Id" serial NOT NULL,
    "AlumniProfileId" int4 NULL,
    "AuthentificatedAt" timestamptz NULL,
    "CreatedTime" timestamptz NOT NULL,
    "Email" text NULL,
    "FirstName" text NOT NULL,
    "IsDeleted" bool NOT NULL,
    "IsMiptAlumni" bool NOT NULL,
    "LastName" text NOT NULL,
    "Role" int4 NOT NULL,
    "Password_Hash" text NULL,
    CONSTRAINT "PK_User" PRIMARY KEY ("Id")
);Executed DbCommand (64ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "User" (
    "Id" serial NOT NULL,
    "AlumniProfileId" int4 NULL,
    "AuthentificatedAt" timestamptz NULL,
    "CreatedTime" timestamptz NOT NULL,
    "Email" text NULL,
    "FirstName" text NOT NULL,
    "IsDeleted" bool NOT NULL,
    "IsMiptAlumni" bool NOT NULL,
    "LastName" text NOT NULL,
    "Role" int4 NOT NULL,
    "Password_Hash" text NULL,
    CONSTRAINT "PK_User" PRIMARY KEY ("Id")
);Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "AlumniProfile" (
    "Id" serial NOT NULL,
    "Diploma" int4 NOT NULL,
    "Faculty" int4 NOT NULL,
    "UserFk" int4 NOT NULL,
    "YearOfGraduation" int4 NOT NULL,
    CONSTRAINT "PK_AlumniProfile" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AlumniProfile_User_UserFk" FOREIGN KEY ("UserFk") REFERENCES "User" ("Id") ON DELETE CASCADE
);Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE "AlumniProfile" (
    "Id" serial NOT NULL,
    "Diploma" int4 NOT NULL,
    "Faculty" int4 NOT NULL,
    "UserFk" int4 NOT NULL,
    "YearOfGraduation" int4 NOT NULL,
    CONSTRAINT "PK_AlumniProfile" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AlumniProfile_User_UserFk" FOREIGN KEY ("UserFk") REFERENCES "User" ("Id") ON DELETE CASCADE
);Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX "IX_AlumniProfile_UserFk" ON "AlumniProfile" ("UserFk");Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX "IX_AlumniProfile_UserFk" ON "AlumniProfile" ("UserFk");Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX "IX_User_AlumniProfileId" ON "User" ("AlumniProfileId");Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX "IX_User_AlumniProfileId" ON "User" ("AlumniProfileId");Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_Email" ON "User" ("Email");Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_Email" ON "User" ("Email");Executing DbCommand [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE "User" ADD CONSTRAINT "FK_User_AlumniProfile_AlumniProfileId" FOREIGN KEY ("AlumniProfileId") REFERENCES "AlumniProfile" ("Id") ON DELETE NO ACTION;Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE "User" ADD CONSTRAINT "FK_User_AlumniProfile_AlumniProfileId" FOREIGN KEY ("AlumniProfileId") REFERENCES "AlumniProfile" ("Id") ON DELETE NO ACTION;Committing transaction.Disposing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneOpening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "User" ("AlumniProfileId", "AuthentificatedAt", "CreatedTime", "Email", "FirstName", "IsDeleted", "IsMiptAlumni", "LastName", "Role", "Password_Hash")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "Id";Executed DbCommand (73ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "User" ("AlumniProfileId", "AuthentificatedAt", "CreatedTime", "Email", "FirstName", "IsDeleted", "IsMiptAlumni", "LastName", "Role", "Password_Hash")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9)
RETURNING "Id";A data reader was disposed.Committing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Disposing transaction.An 'IServiceProvider' was created for internal use by Entity Framework.Entity Framework Core 2.0.0-rtm-26452 initialized 'DbSessionProvider' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: NoneCompiling query model: 
'(from User e in DbSet<User>
where Property([e], "Id") == __get_Item_0
select [e]).FirstOrDefault()'Including navigation: '[e].Password'Optimized query model: 
'(from User e in DbSet<User>
join Password e.Password in DbSet<Password>
on Property([e], "Id") equals Property([e.Password], "UserId") into e.Password_group
from Password e.Password in 
    (from Password e.Password_groupItem in [e.Password_group]
    select [e.Password_groupItem]).DefaultIfEmpty()
where Property([e], "Id") == __get_Item_0
select User _Include(
    queryContext: queryContext, 
    entity: [e], 
    included: new object[]{ [e.Password] }, 
    fixup: (QueryContext queryContext | User entity | Object[] included) => 
    {
        Void queryContext.QueryBuffer.StartTracking(
            entity: entity, 
            entityType: EntityType: User)
        return !(bool ReferenceEquals(included[0], null)) ? 
        {
            Void queryContext.QueryBuffer.StartTracking(
                entity: included[0], 
                entityType: EntityType: User.Password#Password)
            return Void SetRelationshipSnapshotValue(
                stateManager: queryContext.StateManager, 
                navigation: User.Password, 
                entity: entity, 
                value: included[0])
        }
         : default(Void)
    }
)).FirstOrDefault()'(QueryContext queryContext) => IAsyncEnumerable<User> _InterceptExceptions(
    source: IAsyncEnumerable<User> _TrackEntities(
        results: IAsyncEnumerable<User> _ToSequence(Task<User> FirstOrDefault(
                source: IAsyncEnumerable<User> _Select(
                    source: IAsyncEnumerable<TransparentIdentifier<User, Password>> _ShapedQuery(
                        queryContext: queryContext, 
                        shaperCommandContext: SelectExpression: 
                            SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
                            FROM "User" AS "e"
                            WHERE "e"."Id" = @__get_Item_0
                            LIMIT 1, 
                        shaper: TypedCompositeShaper<BufferedOffsetEntityShaper<User>, User, BufferedOffsetEntityShaper<Password>, Password, TransparentIdentifier<User, Password>>), 
                    selector: (TransparentIdentifier<User, Password> t1) => User _Include(
                        queryContext: queryContext, 
                        entity: t1.Outer, 
                        included: new object[]{ t1.Inner }, 
                        fixup: (QueryContext queryContext | User entity | Object[] included) => 
                        {
                            Void queryContext.QueryBuffer.StartTracking(
                                entity: entity, 
                                entityType: EntityType: User)
                            return !(bool ReferenceEquals(included[0], null)) ? 
                            {
                                Void queryContext.QueryBuffer.StartTracking(
                                    entity: included[0], 
                                    entityType: EntityType: User.Password#Password)
                                return Void SetRelationshipSnapshotValue(
                                    stateManager: queryContext.StateManager, 
                                    navigation: User.Password, 
                                    entity: entity, 
                                    value: included[0])
                            }
                             : default(Void)
                        }
                    )), 
                cancellationToken: Unhandled parameter: queryContext.CancellationToken)), 
        queryContext: Unhandled parameter: queryContext, 
        entityTrackingInfos: { itemType: User }, 
        entityAccessors: List<Func<User, object>> 
        { 
            Func<User, User>, 
        }
    ), 
    contextType: DataAccess.DbSessionProvider, 
    logger: DiagnosticsLogger<Query>, 
    queryContext: Unhandled parameter: queryContext)Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Executing DbCommand [Parameters=[@__get_Item_0='?'], CommandType='Text', CommandTimeout='30']
SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
FROM "User" AS "e"
WHERE "e"."Id" = @__get_Item_0
LIMIT 1Executed DbCommand (11ms) [Parameters=[@__get_Item_0='?'], CommandType='Text', CommandTimeout='30']
SELECT "e"."Id", "e"."AlumniProfileId", "e"."AuthentificatedAt", "e"."CreatedTime", "e"."Email", "e"."FirstName", "e"."IsDeleted", "e"."IsMiptAlumni", "e"."LastName", "e"."Role", "e"."Id", "e"."Password_Hash"
FROM "User" AS "e"
WHERE "e"."Id" = @__get_Item_0
LIMIT 1A data reader was disposed.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opening connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Opened connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Beginning transaction with isolation level 'ReadCommitted'.Executing DbCommand [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AlumniProfile" ("Diploma", "Faculty", "UserFk", "YearOfGraduation")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";Failed executing DbCommand (854ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "AlumniProfile" ("Diploma", "Faculty", "UserFk", "YearOfGraduation")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";Disposing transaction.Closing connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.Closed connection to database 'mipt' on server 'tcp://127.0.0.1:32774'.An exception occurred in the database while saving changes for context type 'DataAccess.DbSessionProvider'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> Npgsql.PostgresException: 23503: insert or update on table "AlumniProfile" violates foreign key constraint "FK_AlumniProfile_User_UserFk"
   at Npgsql.NpgsqlConnector.<DoReadMessage>d__148.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<NextResult>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<<NextResultAsync>b__31_0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<Execute>d__71.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReader>d__92.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<>c__DisplayClass90_0.<<ExecuteDbDataReaderAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.<ExecuteAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.NpgsqlExecutionStrategy.<ExecuteAsync>d__7`2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()